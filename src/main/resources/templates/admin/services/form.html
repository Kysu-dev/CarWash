<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{admin/layout :: head}"></head>
<body class="bg-gray-50">
    <div class="min-h-screen flex">
        <div th:replace="~{admin/layout :: sidebar}"></div>
        
        <!-- Main Content -->
        <div class="flex-1 flex flex-col">
            <div th:replace="~{admin/layout :: header}"></div>
            
            <!-- Form Content -->
            <main class="flex-1 p-8">
                <!-- Flash Messages -->
                <div th:if="${success}" class="mb-4 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-check-circle mr-2"></i>
                        <span th:text="${success}"></span>
                    </div>
                </div>
                <div th:if="${error}" class="mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span th:text="${error}"></span>
                    </div>
                </div>

                <div class="max-w-2xl mx-auto">
                    <!-- Back Button -->
                    <div class="mb-6">                        <a th:href="@{/admin/services}" 
                           class="inline-flex items-center text-sm text-gray-600 hover:text-gray-900">
                            <i class="fas fa-arrow-left mr-2"></i>
                            Back to Services
                        </a>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                        <h2 class="text-lg font-semibold text-gray-900 mb-6" 
                            th:text="${service.serviceId == null ? 'Add New Service' : 'Edit Service'}">
                            Service Form
                        </h2>                        <form th:action="${service.serviceId == null} ? @{/admin/services/create} : @{/admin/services/edit/{id}(id=${service.serviceId})}"
                              th:object="${service}" 
                              method="POST"
                              class="space-y-6">
                              <!-- Service Name -->
                            <div>
                                <label for="serviceName" class="block text-sm font-medium text-gray-700">
                                    Service Name <span class="text-red-500">*</span>
                                </label>
                                <div class="mt-1">
                                    <input type="text" 
                                           id="serviceName" 
                                           name="serviceName"
                                           th:field="*{serviceName}"
                                           class="block w-full px-4 py-2 rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                                           required>
                                    <p class="mt-1 text-sm text-gray-500">Enter a unique name for the service</p>
                                </div>
                            </div>

                            <!-- Vehicle Type -->
                            <div>
                                <label for="vehicleType" class="block text-sm font-medium text-gray-700">
                                    Vehicle Type <span class="text-red-500">*</span>
                                </label>
                                <div class="mt-1">
                                    <select id="vehicleType" 
                                            name="vehicleType"
                                            th:field="*{vehicleType}"
                                            class="block w-full px-4 py-2 rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                                            required>
                                        <option value="">Select Vehicle Type</option>
                                        <option value="MOBIL" th:selected="*{vehicleType?.name() == 'MOBIL'}">Mobil</option>
                                        <option value="MOTOR" th:selected="*{vehicleType?.name() == 'MOTOR'}">Motor</option>
                                    </select>
                                    <p class="mt-1 text-sm text-gray-500">Choose the type of vehicle for this service</p>
                                </div>
                            </div>

                            <!-- Description -->
                            <div>
                                <label for="description" class="block text-sm font-medium text-gray-700">
                                    Description
                                </label>
                                <div class="mt-1">
                                    <textarea id="description" 
                                              name="description"
                                              th:field="*{description}"
                                              rows="4"
                                              class="block w-full px-4 py-2 rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"></textarea>
                                    <p class="mt-1 text-sm text-gray-500">Provide a detailed description of the service</p>
                                </div>
                            </div>

                            <!-- Duration -->
                            <div>
                                <label for="estimatedDurationMinutes" class="block text-sm font-medium text-gray-700">
                                    Duration (minutes) <span class="text-red-500">*</span>
                                </label>
                                <div class="mt-1">                                    <input type="number" 
                                           id="estimatedDurationMinutes" 
                                           name="estimatedDurationMinutes"
                                           th:field="*{estimatedDurationMinutes}"
                                           class="block w-full px-4 py-2 rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                                           min="1"
                                           max="480"
                                           step="1"
                                           required>
                                    <p class="mt-1 text-sm text-gray-500">Estimated service duration (1-480 minutes)</p>
                                </div>
                            </div>

                            <!-- Price -->
                            <div>
                                <label for="price" class="block text-sm font-medium text-gray-700">
                                    Price (Rp) <span class="text-red-500">*</span>
                                </label>
                                <div class="mt-1">                                    <input type="number" 
                                           id="price" 
                                           name="price"
                                           th:field="*{price}"
                                           class="block w-full px-4 py-2 rounded-md border border-gray-300 shadow-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500"
                                           min="0"
                                           step="1000"
                                           required>
                                    <p class="mt-1 text-sm text-gray-500">Service price in Rupiah (minimum 0)</p>
                                </div>
                            </div>

                            <!-- Active Status -->
                            <div class="relative flex items-start p-4 rounded-md border border-gray-200 bg-gray-50">
                                <div class="flex items-center h-5">
                                    <input type="checkbox" 
                                           id="active" 
                                           name="active"
                                           th:field="*{active}"
                                           class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                </div>
                                <div class="ml-3">
                                    <label for="active" class="font-medium text-gray-700">Service Status</label>
                                    <p class="text-sm text-gray-500">
                                        Toggle to set service availability
                                    </p>
                                </div>
                                <div class="ml-auto">
                                    <span th:if="*{active}"
                                          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        <i class="fas fa-check-circle mr-1"></i>
                                        Active
                                    </span>
                                    <span th:unless="*{active}"
                                          class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        <i class="fas fa-times-circle mr-1"></i>
                                        Inactive
                                    </span>
                                </div>
                            </div>

                            <!-- Error Message -->
                            <div th:if="${error}" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md" role="alert">
                                <span th:text="${error}">Error message here</span>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex items-center justify-end space-x-4 pt-6 border-t border-gray-100">                                <a th:href="@{/admin/services}" 
                                   class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Cancel
                                </a>
                                <button type="submit" 
                                        class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    <i class="fas fa-save mr-2"></i>
                                    Save Service
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <div th:replace="~{admin/layout :: scripts}"></div>
</body>
</html>
